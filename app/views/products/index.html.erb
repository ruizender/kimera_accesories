<div class="container">


    <%= search_form_for @q do |f|%>
        <div class="ml-auto">
            <% if current_user && current_user.admin == true  %>
            <%= link_to 'Nuevo Producto', new_product_path, class:'btn btn-outline-success btn-light mx-2' %>
            <%= link_to 'Nueva Categoria', new_category_path, class:'btn btn-outline-success btn-light' %>
            <% end  %>
        </div>
        <div  class="form-inline my-2 my-lg-0"%>
            <%= f.search_field :name_or_descriptions_cont, placeholder: 'Buscar Productos', class:"form-control mr-sm-2" %>
            <%= f.submit "Buscar", class:"btn btn-outline-success mx-2 my-2" %> 
            <%= link_to "Mostrar todos", root_path, class:' form-control btn btn-outline-success text-success'%>
        </div>
    <% end %>

    <div class="card-deck container-fluid py-2 mx-auto">
        <div class="row">
            <% @products.each do |product| %>
                <div class="card">
                    <%= link_to (product_path(product)) do %>
                    <%= image_tag product.photo, class:"imagen-logo" %>
                    <% end %>
                    <div class="card-body">
                        <h5 class="card-title h3 text-dark"><%= product.name %></h5>
                            <%= form_for :shopping_cart, url: shopping_cart_path(product), method: :put do |f| %>
                            <%= f.hidden_field :product_id, value: product.id %>
                            <%= f.hidden_field :quantity, value: 1 %>
                            <span>Calificaci√≥n : <%= rating_for product, 'price', star: 5 %></span>
                        </div>
                        <p class="card-text h4 text-danger text-center">$<%= product.price %></p>
                            <%= f.submit "Agregar al carrito", class:"btn btn-primary btn-sm mx-2 my-2"%>
                        </div>
                <% end %>
            <% end %>
        </div>
    </div>

    <div class="col-md-8 offset-md-2 mx-2 my-5 ">
        <%= paginate @products %>
    </div>
</div>