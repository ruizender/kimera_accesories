<p id="notice"><%= notice %></p>

<h1>Products</h1>


<%= search_form_for @q do |f|%>
<div  class="form-inline my-2 my-lg-0"%>
  <%= f.search_field :name_or_descriptions_cont, placeholder: 'Buscar Productos', class:"form-control mr-sm-2" %>
  <%= f.submit "Buscar", class:"btn btn-outline-success mx-2 my-2" %> 
  <%= link_to "Mostrar todos", root_path, class:'btn btn-outline-success text-light'%>
  </div>
<% end %>


<div class="row">
  <div class="col-md-8 offset-2">
    <div class="container">
      <div class="row">
        <% @products.each do |product| %> <div class="col-md-3">
          <div class="card">
            <%= link_to (product_path(product)) do %>
            <img class="card-img-top"
              src="<%= product.photo%>" alt=""/>
            <div class="card-block">
              <h5 class="card-title"><%= product.name %></h5> 
                <div class="card-text">
                <div class="badge badge-primary">
                <%= product.category.name %></div>
              <% end %>
                <div>$<%= product.price %></div>
                </div>
                  <%= product.descriptions %>
                    <div class="row float-right"> 
                      <div class="col-md-12">
                          <%= form_for :shopping_cart, url: shopping_cart_path(product), method: :put do |f| %>
                          <%= f.hidden_field :product_id, value: product.id %>
                          <%= f.hidden_field :quantity, value: 1 %> 
                          <%= f.submit "Add to cart", class:"btn btn-primary btn-sm" %>
                        <% end %>
                          </div> 
                        </div>
                      </div> 
                    </div>
                  </div> 
              <% end %>
            </div> 
          </div>
        </div> 
      </div>



<div class="row ">
    <div class="col-md-8 offset-md-2 mx-2 my-5 ">
      <%= paginate @products, class:'btn btn-light mx-2'  %>
    </div>
</div>